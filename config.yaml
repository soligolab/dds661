# config.yaml â€” Generic Modbus meters (DDS661 + SDM230)
# Adattato dal tuo file precedente. Aggiunto SDM230 id=1 come "Contatore F.M".
# Nota: 'period_s' sostituisce il vecchio 'interval_s'.

serial:
  port: /dev/ttyUSB0
  baudrate: 9600
  parity: E           # E, O, N (deve combaciare con il device)
  stopbits: 1
  bytesize: 8
  timeout: 1.0

mqtt:
  host: 192.168.1.6
  port: 1883
  client_id: dds661-bridge
  username: mqttuser
  password: mqttpass
  keepalive: 30
  base_topic: dds661
  topic_style: measurements    # flat | state | measurements (informativo)
  qos: 0
  retain: true
  tls: false                   # true | false | oppure dict: {enabled: true, ca_certs: ..., certfile: ..., keyfile: ...}

home_assistant:
  enabled: true
  discovery_prefix: homeassistant
  # area: "Quadro elettrico"   # opzionale

polling:
  period_s: 1.0                 # era 'interval_s' nel vecchio file
  read_mode: sequential         # sequential | bulk
  per_measure_delay_ms: 80      # ritardo tra letture di singole misure
  delay_ms_between_devices: 80  # ritardo tra dispositivi
  debug_log: false              # stampa JSON per-device sul log

devices:
  - id: 1
    type: sdm230
    name: "Contatore F.M"
  - id: 10
    type: dds661
    name: "Contatore Cucina"
  - id: 11
    type: dds661
    name: "Contatore PompaCalore"
  - id: 12
    type: dds661
    name: "Contatore Giardino"
  - id: 13
    type: dds661
    name: "Contatore Rack"
